A major release is underway on the development branch. 

h2. Developer prereqs

Ruby 2.x
git
java jre (at least 1.6, but 1.8 will be more future proof when we start to use fedora 4)


h2. Installation and Configuration

<pre>
git clone https://github.com/nulib/images.git
bundle install
rake db:migrate
rake jetty:config
rake hydra:fixtures:refresh
rake db:test:prepare
</pre>

h3. Local development only

You'll need to install imagemagick to handle the tiff to jp2 conversion on your local machine.
<pre>
brew install imagemagick --with-libtiff --with-jp2
</pre>

h3. Install ClamAV

On OSX, the easiest way to get clamav is through homebrew
<pre>
brew install clamav
</pre>

h2. Running the application

<pre>
rake jetty:start
rails s
</pre>

h2. Testing the application

In the development branch, you can run rspec spec to test the app.

To test the main image model, run: 
<pre>
rspec spec/models/multiresimage_spec.rb
</pre>

The selenium tests require firefox 24 ( https://ftp.mozilla.org/pub/mozilla.org/firefox/releases/24.0/mac/en-US/Firefox%2024.0.dmg )

Also make sure the rails server is running before running them.

You'll need to be connected to the VPN.

To integration test the app, run:
<pre>
rspec spec/features
</pre>

h2. Deploying

We've got capistrano set up, so deploying *should* be as easy as 'cap environment deploy'. 
Keep in mind that a deploy only copies over whatever files are in the public github repo, so many config files don't get copied during a deploy. You'll need to copy them over manually or maybe try running cap deploy setup.
